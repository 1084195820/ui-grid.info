/*! ui-grid - v2.0.7-e706f4c - 2014-01-03
* Copyright (c) 2014 ; Licensed MIT */
!function(){"use strict";var a=angular.module("ui.grid.body",[]);a.directive("uiGridBody",["$log","GridUtil",function(a,b){return{replace:!0,templateUrl:"ui-grid/ui-grid-body",require:"?^uiGrid",scope:!1,link:function(c,d,e,f){void 0===f&&a.warn("[ui-grid-body] uiGridCtrl is undefined!"),a.debug("ui-grid-body link"),f.canvas=angular.element(d[0].getElementsByClassName("ui-grid-canvas")[0]),f.viewport=angular.element(d[0].getElementsByClassName("ui-grid-viewport")[0]),f.viewportOuterHeight=b.outerElementHeight(f.viewport[0]),f.prevScrollTop=0,f.currentTopRow=0,f.adjustScrollVertical=function(a,b,d){if(f.prevScrollTop!==a||d){a>0&&f.canvas[0].scrollHeight-a<=f.viewportOuterHeight,a=Math.floor(f.canvas[0].scrollHeight*b);var e=Math.min(c.options.data.length,c.options.data.length*b),g=c.options.data.length-1-f.minRowsToRender();e>g&&(e=g);var h=[];if(c.options.data.length>c.options.virtualizationThreshold){if(f.prevScrollTop<a&&e<f.prevScrollIndex+c.options.scrollThreshold)return;if(f.prevScrollTop>a&&e>f.prevScrollIndex-c.options.scrollThreshold)return;var i=f.minRowsToRender(),j=Math.floor(Math.max(0,e-c.options.excessRows)),k=Math.floor(Math.min(c.options.data.length,e+i+c.options.excessRows));h=[j,k]}else{var l=c.options.data.length;h=[0,Math.max(l,f.minRowsToRender()+c.options.excessRows)]}f.prevScrollTop=a,f.updateViewableRange(h),f.prevScrollIndex=e}};var g=c.$on("uiGridScrollVertical",function(b,d){var e=Math.max(0,d.scrollPercentage*(c.options.canvasHeight-c.options.viewportHeight)),g=1,h=d.scrollPercentage*g;a.debug("newScrollTop",e),a.debug("scrollPercentage",h),c.options.offsetTop=e,e>c.options.canvasHeight-c.options.viewportHeight&&(e=c.options.canvasHeight-c.options.viewportHeight),f.adjustScrollVertical(e,h),f.viewport[0].scrollTop=e});d.bind("mousewheel",function(b){b.preventDefault(),a.debug("evt.wheelDeltaY",b.wheelDeltaY);var e=-1*b.wheelDeltaY,g=(f.viewport[0].scrollTop+e)/(f.viewport[0].scrollHeight-c.options.viewportHeight);a.debug("scrollPercentage",g),c.$broadcast("uiGridScrollVertical",{scrollPercentage:g,target:d})}),d.bind("keyDown",function(){}),d.bind("$destroy",function(){g(),d.unbind("mousewheel"),d.unbind("keyDown")}),f.setRenderedRows=function(a){c.renderedRows.length=a.length,c.$evalAsync(function(){for(var b=0;b<a.length;b++)c.renderedRows[b]=a[b]})},f.updateViewableRange=function(b){a.debug("new viewable range",b);var d=c.options.data.slice(b[0],b[1]);f.currentTopRow=b[0],f.setRenderedRows(d)},c.rowStyle=function(a){var b=Math.max(0,-1*c.options.rowHeight*c.options.excessRows+(c.options.offsetTop||0)),d={top:b+a*c.options.rowHeight+"px"};return d}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.header",["ui.grid.util"]);a.directive("uiGridHeader",["$log","$templateCache","$compile","GridUtil",function(a){return{restrict:"EA",templateUrl:"ui-grid/ui-grid-header",replace:!0,require:"?^uiGrid",scope:!1,link:function(b,c,d,e){void 0===e&&a.warn("[ui-grid-header] uiGridCtrl is undefined!"),a.debug("ui-grid-header link"),e&&(e.header=c),b.$watch("options.columnDefs",function(){e.refreshCanvas()})}}}])}(),function(){"use strict";var a=angular.module("ui.grid.row",[]);a.directive("uiGridRow",["$log","GridUtil",function(a){return{replace:!0,priority:1e3,templateUrl:"ui-grid/ui-grid-row",require:["?^uiGrid","?^ngRepeat"],scope:{row:"=uiGridRow",rowIndex:"="},link:function(b,c,d,e){{var f=e[0];e[1]}void 0===f&&a.warn("[ui-grid-row] uiGridCtrl is undefined!"),b.options=f.grid.options}}}])}(),function(){var a=angular.module("ui.grid.scrollbar",[]);a.directive("uiGridScrollbar",["$log","$document","GridUtil",function(a,b,c){return{replace:!0,templateUrl:"ui-grid/ui-grid-scrollbar",require:"?^uiGrid",scope:!1,link:function(d,e,f,g){function h(a){var b=Math.max(35,a.options.viewportHeight/a.options.canvasHeight*a.options.viewportHeight);a.scrollbarStyles=".grid"+a.gridId+" .ui-grid-scrollbar-vertical { height: "+b+"px; }"}function i(a){a.preventDefault(),n=c.elementHeight(e,"margin"),o=d.options.viewportHeight-n,l=a.screenY-m,b.on("mousemove",j),b.on("mouseup",k)}function j(a){m=a.screenY-l,0>m&&(m=0),m>o&&(m=o);var b=m/o;d.$emit("uiGridScrollVertical",{scrollPercentage:b,target:e})}function k(){b.unbind("mousemove",j),b.unbind("mouseup",k)}void 0===g&&a.warn("[ui-grid-scrollbar] uiGridCtrl is undefined!"),a.debug("ui-grid-scrollbar link"),d.showScrollbar=function(){return d.options.canvasHeight>d.options.viewportHeight},g&&g.styleComputions.push(h);var l=0,m=0,n=c.elementHeight(e,"margin"),o=d.options.viewportHeight-n;e.on("mousedown",i);var p=d.$on("uiGridScrollVertical",function(b,f){f.scrollPercentage<0&&(f.scrollPercentage=0),f.scrollPercentage>1&&(f.scrollPercentage=1),n=c.elementHeight(e,"margin"),o=d.options.viewportHeight-n;var g=Math.floor(f.scrollPercentage*o),h=g;h>d.options.canvasHeight-n&&(a.debug("newTop too big!",h),h=d.options.canvasHeight-n),m=g,e.css({top:h+"px"})});e.on("$destroy",function(){p(),b.unbind("mousemove",j),b.unbind("mouseup",k),e.unbind("mousedown")})}}}])}(),function(){var a=angular.module("ui.grid.style",[]);a.directive("uiGridStyle",["$log","$interpolate",function(a,b){return{require:"?^uiGrid",link:function(c,d,e,f){a.debug("ui-grid-style link");var g=b(d.text(),!0);g&&c.$watch(g,function(a){d.text(a)}),f&&f.styleComputions.push(function(){var a=f.grid.gridWidth,b=a/c.options.columnDefs.length,d="",e=0;angular.forEach(c.options.columnDefs,function(a,f){d=d+" .grid"+c.gridId+" .col"+f+" { width: "+b+"px; left: "+e+"px; }",e+=b}),c.columnStyles=d})}}}])}(),function(){"use strict";var a=angular.module("ui.grid",["ui.grid.header","ui.grid.body","ui.grid.row","ui.grid.style","ui.grid.scrollbar"]);a.directive("uiGrid",["$log","$compile","$templateCache","GridUtil",function(a,b,c,d){function e(b,c,e,f){a.debug("ui-grid prelink");var g=b.options={data:[],columnDefs:null,headerRowHeight:30,rowHeight:30,maxVisibleRowCount:200,virtualizationThreshold:50,excessRows:4,scrollThreshold:4};f.grid={options:b.options},angular.extend(g,b.uiGrid),b.gridId=d.newId(),b.renderedRows=[],g.columnDefs&&0!==g.columnDefs.length||(g.columnDefs=d.getColumnsFromData(g.data)),c.on("$destroy",function(){})}return{templateUrl:"ui-grid/ui-grid",scope:{uiGrid:"="},replace:!0,compile:function(){return{pre:e,post:function(b,c,e,f){function g(a){if(a){b.options.columnDefs.length<=0&&(b.options.columnDefs=d.getColumnsFromData(a)),b.options.data=a,f.buildStyles();var c=f.viewport[0].scrollTop;f.adjustScrollVertical(c,null,!0),b.$evalAsync(function(){f.refreshCanvas()})}}a.debug("ui-grid postlink"),f.grid.gridWidth=b.gridWidth=c[0].clientWidth,f.grid.gridHeight=b.gridHeight=d.elementHeight(c),f.refreshCanvas(),"undefined"!=typeof b.options.data&&void 0!==b.options.data&&b.options.data.length&&(b.visibleRowCount=b.options.data.length);var h;h=angular.isString(b.uiGrid.data)?b.$parent.$watch(b.uiGrid.data,g):b.$parent.$watch(function(){return b.uiGrid.data},g),c.on("$destroy",h)}}},controller:function(b){a.debug("ui-grid controller");var c=this;c.styleComputions=[],c.buildStyles=function(){angular.forEach(c.styleComputions,function(a){a.call(c,b)})},b.$watch(function(){return c.styleComputions},function(){c.buildStyles()}),c.minRowsToRender=function(){return Math.ceil(b.options.viewportHeight/b.options.rowHeight)},c.refreshCanvas=function(){var a=b.options.headerRowHeight;c.header&&(a=d.outerElementHeight(c.header)),b.options.viewportHeight=b.gridHeight-a,b.options.canvasHeight=b.options.rowHeight*b.options.data.length,c.canvas&&c.grid.options.data.length&&(c.grid.options.totalRowHeight=c.grid.options.rowHeight*c.grid.options.data.length),c.buildStyles()}}}}])}(),function(){"use strict";function a(b,c,d){return angular.isArray(b)?angular.forEach(b,function(b){return a(b,c,d)}):Math.max(c,Math.min(b,d))}var b=angular.module("ui.virtual-repeat",[]),c=["TABLE","TBODY","THEAD","TR","TFOOT"],d=["TABLE","TBODY","THEAD","TR","TFOOT"],e=["TABLE","TBODY","THEAD","TR","TFOOT"];b.directive("uiVirtualRepeat",["$log","$rootElement",function(b,f){function g(a){var b=a.match(/^\s*([\$\w]+)\s+in\s+([\S\s]*)$/);if(!b)throw new Error("Expected uiVirtualRepeat in form of '_item_ in _collection_' but got '"+a+"'.");return{value:b[1],collection:b[2]}}function h(a,b){var c,d=a.tagName.toUpperCase();for(c=0;c<b.length;c++)if(b[c]===d)return!0;return!1}function i(a){var b,e,g=f[0];for(b=a.parent().parent()[0];b!==g&&1==b.nodeType;b=b.parentNode)if(!h(b,c)&&1==b.childElementCount&&!h(b.firstElementChild,d)){for(e=b.firstChild;e&&(3!=e.nodeType||!/\S/g.test(e.textContent));e=e.nextSibling);if(null==e)return{viewport:angular.element(b),content:angular.element(b.firstElementChild)}}throw new Error("No suitable viewport element")}function j(a){var b={overflow:"auto"},c=window.getComputedStyle?window.getComputedStyle(a[0]):a[0].currentStyle,d=c&&c.getPropertyValue("max-height"),e=c&&c.getPropertyValue("height");d&&"0px"!==d?b.maxHeight=d:b.height=e&&"0px"!==e?e:window.innerHeight,a.css(b)}function k(a){var b={margin:0,padding:0,border:0,"box-sizing":"border-box"};a.css(b)}function l(a){var b=window.getComputedStyle?window.getComputedStyle(a):a.currentStyle,c=b&&b.getPropertyValue("max-height"),d=b&&b.getPropertyValue("height");if(d&&"0px"!==d&&"auto"!==d);else if(c&&"0px"!==c&&"none"!==c)d=c;else{if(!a.clientHeight)return;d=a.clientHeight+"px"}return angular.element(a).css("height",d),parseInt(d,10)}function m(b,c,d){function f(b,c,f){function g(a){var b={margin:"0"};h(a[0],e)||(b.display="block"),v&&(b.height=v+"px"),a.css(b)}function n(a,b,c){var d=c.$new();return d[m.value]=b[a],d.$index=a,d.$first=0===a,d.$last=a===b.length-1,d.$middle=!(d.$first||d.$last),d.$watch(function(){d[m.value]=b[a]}),d}function o(a,b,c,e,f){var h,i,j,k=document.createDocumentFragment(),l=[];for(i=a;i!==b;i++)j=n(i,c,e),h=d(j,angular.noop),g(h),l.push(h),k.appendChild(h[0]);return f.after(k),l}function p(){var b=a(y.firstActive,y.firstVisible-y.lowWater,y.firstVisible-y.highWater),c=a(y.firstActive+y.active,y.firstVisible+y.visible+y.lowWater,y.firstVisible+y.visible+y.highWater);y.firstActive=Math.max(0,b),y.active=Math.min(c,y.total)-y.firstActive}function q(a){v&&b.$apply(function(){y.firstVisible=Math.floor(a.target.scrollTop/v),y.visible=Math.ceil(x.viewport[0].clientHeight/v),w=a.target.scrollTop+a.target.clientHeight>=a.target.scrollHeight,p()})}function r(a){var b=a.$eval(m.collection);return b.length!==y.total&&(y.total=b.length,p()),{start:y.firstActive,active:y.active,len:b.length}}function s(a,b){var c,d,e=Array.prototype[a];for(d=0;b>d;d++)c=e.call(u),c.scope().$destroy(),c.remove()}function t(a,b,d){var e,f=b.start+b.active,g=d.$eval(m.collection);if(a===b)e=o(a.start,f,g,d,c),u=e,u.length&&(v=l(e[0][0]));else{var h=a.start+a.active,i=a.start>=b.start,j=i?a.start-b.start:b.start-a.start,k=h>=f?h-f:f-h,n=j<(i?b.active:a.active);if(n){if(i?s("shift",j):j&&(e=o(a.start,b.start,g,d,c),u=e.concat(u)),f>h)s("pop",f-h);else if(k){var p=u[u.length-1];e=o(f,h,g,d,p),u=u.concat(e)}}else s("pop",u.length),u=o(a.start,h,g,d,c);!v&&u.length&&(v=l(u[0][0])),x.content.css({"padding-top":a.start*v+"px"})}x.content.css({height:a.len*v+"px"}),w&&(x.viewport[0].scrollTop=x.viewport[0].clientHeight+x.viewport[0].scrollHeight),d.rendered=u}var u=[];b.rendered=u;var v=0,w=!1,x=i(c),y="ngModel"in f?b.$eval(f.ngModel):{};y.firstActive=0,y.firstVisible=0,y.visible=0,y.active=0,y.total=0,y.lowWater=y.lowWater||10,y.highWater=y.highWater||20,k(x.content),j(x.viewport),x.viewport.bind("scroll",q),b.$watch(r,t,!0)}var m=g(c.uiVirtualRepeat);return{post:f}}var n={require:"?ngModel",transclude:"element",priority:1e3,compile:m,controller:["$scope",function(){this.visibleRows=0,this.visibleRows=this.visibleRows+1}]};return n}])}(),function(){function a(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)}function b(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0,h=["Top","Right","Bottom","Left"];4>f;f+=2){var i=h[f];if("margin"===c){var j=parseFloat(e[c+i]);isNaN(j)||(g+=j)}if(d){if("content"===c){var k=parseFloat(e["padding"+i]);isNaN(k)||(g-=k)}if("margin"!==c){var l=parseFloat(e["border"+i+"Width"]);isNaN(l)||(g-=l)}}else{var m=parseFloat(e["padding"+i]);if(isNaN(m)||(g+=m),"padding"!==c){var n=parseFloat(e["border"+i+"Width"]);isNaN(n)||(g+=n)}}}return g}function c(c,d,f){var g=!0,h="width"===d?c.offsetWidth:c.offsetHeight,i=a(c),j="border-box"===i.boxSizing;if(0>=h||null==h){if(h=i[d],(0>h||null==h)&&(h=c.style[d]),e.test(h))return h;g=j&&!0,h=parseFloat(h)||0}var k=h+b(c,d,f||(j?"border":"content"),g,i);return k}var d=angular.module("ui.grid.util",[]),e=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i");d.service("GridUtil",["$window",function(){var a={readableColumnName:function(a){return"undefined"==typeof a||void 0===a||null===a?a:("string"!=typeof a&&(a=String(a)),a.replace(/_+/g," ").replace(/^[A-Z]+$/,function(a){return angular.lowercase(angular.uppercase(a.charAt(0))+a.slice(1))}).replace(/(\w+)/g,function(a){return angular.uppercase(a.charAt(0))+a.slice(1)}).replace(/(\w+?(?=[A-Z]))/g,"$1 "))},getColumnsFromData:function(b){var c=[];if(!b||"undefined"==typeof b[0]||void 0===b[0])return[];var d=b[0];return angular.forEach(d,function(b,d){c.push({field:d,name:a.readableColumnName(d)})}),c},newId:function(){var a=(new Date).getTime();return function(){return a+=1}}(),elementWidth:function(){},elementHeight:function(){}};return angular.forEach(["width","height"],function(b){var d=angular.uppercase(b.charAt(0))+b.substr(1);a["element"+d]=function(a,d){var e=a;return"undefined"!=typeof e.length&&e.length&&(e=a[0]),a?c(e,b,d):null},a["outerElement"+d]=function(b,c){return b?a["element"+d].call(this,b,c?"margin":"border"):null}}),a}])}();