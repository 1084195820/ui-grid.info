<h1><code ng:non-bindable="">ColumnDef</code>
<span class="hint">(api in module <code ng:non-bindable="">ui.grid.treeBase</code>
)</span>
</h1>
<div><h2 id="Description">Description</h2>
<div class="description"><p>ColumnDef for tree feature, these are available to be 
set using the ui-grid <a href="#/api/ui.grid.class:GridOptions.columnDef">gridOptions.columnDefs</a></p></div>
<div class="member property"><h2 id="Properties">Properties</h2>
<ul class="properties"><li><h3 id="customTreeAggregationFinalizerFn">customTreeAggregationFinalizerFn</h3>
<div class="customtreeaggregationfinalizerfn"><p>A custom function that populates aggregation.rendered, this is called when
a particular aggregation has been fully calculated, and we want to render the value.</p>

<p>Typically we just concatenate aggregation.label and aggregation.value, but if you
wanted to apply a filter or otherwise manipulate the label or the value, you can do
so with this function.</p><h4 id="Example">Example</h4>
<div class="example"><pre class="prettyprint linenums">
customTreeAggregationFinalizerFn = function ( aggregation ){
  aggregation.rendered = aggregation.label + aggregation.value / 100 + '%';
}
</pre>
<br/>Defaults to undefined.</p></div>
</div>
</li>
<li><h3 id="customTreeAggregationFn">customTreeAggregationFn</h3>
<div class="customtreeaggregationfn"><p>A custom function that aggregates rows into some form of
total.  Aggregations run row-by-row, the function needs to be capable of
creating a running total.</p>

<p>The function will be provided the aggregation item (in which you can store running
totals), the row value that is to be aggregated, and that same row value converted to 
a number (most aggregations work on numbers)</p><h4 id="Example">Example</h4>
<div class="example"><pre class="prettyprint linenums">
customTreeAggregationFn = function ( aggregation, fieldValue, numValue, row ){
  // calculates the average of the squares of the values
  if ( typeof(aggregation.count) === 'undefined' ){
    aggregation.count = 0;
  }
  aggregation.count++;

  if ( !isNaN(numValue) ){
    if ( typeof(aggregation.total) === 'undefined' ){
      aggregation.total = 0;
    }
    aggregation.total = aggregation.total + numValue * numValue;
  }

  aggregation.value = aggregation.total / aggregation.count;
}
</pre>
<br/>Defaults to undefined.  Required if you set the aggregation type to CUSTOM</p></div>
</div>
</li>
<li><h3 id="treeAggregation">treeAggregation</h3>
<div class="treeaggregation"><p>Calculate aggregations on this column.  Aggregations
are an object in the format:</p>

<pre class="prettyprint linenums">
  {
    type: uiGridTreeBaseConstants.aggregation.SUM,
    label: &lt;optional label, if provided we don't use the native i18n&gt;
  }
</pre>

<p>If you are using aggregations you should either:</p>

<ul>
<li>also use grouping, in which case the aggregations are displayed in the group header, OR</li>
<li>use treeView, in which case you can set <code>treeAggregationUpdateEntity: true</code> in the colDef, and
treeBase will store the aggregation information in the entity, or you can set <code>treeAggregationUpdateEntity: false</code> 
in the colDef, and you need to manual retrieve the calculated aggregations from the row.treeNode.aggregations</li>
</ul>

<p><br/>Defaults to undefined.</p></div>
</li>
<li><h3 id="treeAggregationUpdateEntity">treeAggregationUpdateEntity</h3>
<div class="treeaggregationupdateentity"><p>Store calculated aggregations into the entity, allowing them
to be displayed in the grid using a standard cellTemplate.  This defaults to true,
if you are using grouping then you shouldn't set it to false, as then the aggregations won't
display.</p>

<p>If you are using treeView in most cases you'll want to set this to true.  This will result in 
getCellValue returning the aggregation rather than whatever was stored in the cell attribute on
the entity.  If you want to render the underlying entity value (and do something else with the aggregation)
then you could use a custom cellTemplate to display <code>row.entity.myAttribute</code>, rather than using getCellValue.</p>

<p><br/>Defaults to true</p><h4 id="Example">Example</h4>
<div class="example"><pre class="prettyprint linenums">
gridOptions.columns = [{ 
  name: 'myCol', 
  treeAggregation: { type: uiGridTreeBaseConstants.aggregation.SUM }, 
  treeAggregationUpdateEntity: true 
  cellTemplate: '&lt;div&gt;{{row.entity.myCol + " " + row.treeNode.aggregations[0].rendered}}&lt;/div&gt;'
}];
</pre></div>
</div>
</li>
</ul>
</div>
</div>
